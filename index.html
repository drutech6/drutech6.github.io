<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leonella's Vacation Home</title>
    <style>
        /* --- General & Typography --- */
        :root {
            --primary-color: #1A9C3F;
            --text-color: #93BDBB;
            --heading-color: #5BA383;
            --bg-deepest: #0F141A;
            --bg-dark-navy: #162432;
            --bg-mid-navy: #1E3044;
            --bg-slate: #293A4C;
            --bg-muted: #354557;
            --border-color: #4A5562;
            --hover-bg: rgba(26, 156, 63, 0.3);
            --disabled-color: #DE1414; /* Changed for better visibility */
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-deepest);
            color: var(--text-color);
            line-height: 1.7;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        h1, h2, h3 {
            color: var(--heading-color);
            font-weight: 600;
        }

        h2 {
            text-align: center;
            font-size: 2.2em;
            margin-bottom: 50px;
        }

        section {
            padding: 60px 0 120px;
            border-bottom: 1px solid var(--border-color);
        }

        section:last-of-type {
            border-bottom: none;
        }

        /* --- Section Backgrounds --- */
        #home { background-color: var(--bg-deepest); }
        #about { background-color: var(--bg-slate); }
        #amenities { background-color: var(--bg-mid-navy); }
        #house-rules, #gallery { background-color: var(--bg-muted); }
        #book-now { background-color: var(--bg-mid-navy); }
        #contact { background-color: var(--bg-deepest); }

        /* --- Buttons & Links --- */
        .btn {
            display: inline-block;
            margin-top: 15px;
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: var(--bg-deepest);
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.2s;
        }

        .btn:hover {
            background-color: #E8B87A;
            transform: translateY(-2px);
        }

        /* --- Navigation Bar --- */
        .navbar {
            background-color: var(--bg-deepest);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--heading-color);
            text-decoration: none;
        }

        .nav-links {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
        }

        .nav-links li {
            margin-left: 28px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: bold;
            transition: color 0.3s;
            padding: 8px 12px;
            border-radius: 5px;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--primary-color);
            background-color: rgba(26, 156, 63, 0.2);
        }

        .menu-toggle {
            display: none;
            font-size: 24px;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--heading-color);
        }

        /* --- Amenities & Booking Form Styling --- */
        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            list-style: none;
            padding: 0;
        }

        .amenities-grid li {
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(6px);
            padding: 28px 20px;
            border-radius: 12px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: transform 0.3s ease;
        }

        .amenities-grid li:hover {
            transform: translateY(-5px);
        }

        #bookingForm {
            background-color: var(--bg-mid-navy);
            padding: 35px;
            border-radius: 10px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            margin-top: 20px;
            border: 1px solid var(--border-color);
        }

        label {
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--text-color);
        }

        input[type="text"] {
            width: 100%;
            padding: 13px;
            border: 1px solid var(--border-color);
            background-color: var(--bg-slate);
            color: var(--text-color);
            border-radius: 6px;
            font-size: 1em;
            transition: border-color 0.3s;
            box-sizing: border-box; /* Added for consistency */
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        input[type="text"]::placeholder {
            color: #9ab;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .submit-btn {
            grid-column: 1 / -1;
            padding: 16px;
            background-color: var(--primary-color);
            color: var(--bg-deepest);
            border: none;
            border-radius: 6px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        .submit-btn:hover {
            background-color: #E8B87A;
            transform: translateY(-2px);
        }

        /* --- Gallery Styling --- */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 30px;
        }

        .gallery-item {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
            cursor: pointer;
        }

        .gallery-item:hover {
            transform: scale(1.03);
        }

        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }

        /* --- Image Modal Styling --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .modal-content {
            max-width: 90%;
            max-height: 85vh;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease-in-out;
        }

        .modal-content img {
            width: 100%;
            height: auto;
            max-height: 80vh;
            object-fit: contain;
            border-radius: 8px;
        }

        .modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            font-size: 30px;
            padding: 15px;
            cursor: pointer;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
            transition: background 0.3s;
        }

        .modal-nav:hover {
            background-color: var(--primary-color);
        }

        #prevBtn {
            left: 20px;
        }

        #nextBtn {
            right: 20px;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: #aaa;
            cursor: pointer;
            background: none;
            border: none;
        }

        .close-modal:hover {
            color: white;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* --- House Rules Styling --- */
        .rules-list {
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.8;
            font-size: 1.05em;
        }

        .rules-list li {
            margin-bottom: 12px;
        }

        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
                flex-direction: column;
                width: 100%;
                text-align: center;
                position: absolute;
                top: 70px;
                left: 0;
                background-color: var(--bg-deepest);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                padding: 15px 0;
            }

            .nav-links.active {
                display: flex;
            }

            .nav-links li {
                margin: 15px 0;
            }

            .menu-toggle {
                display: block;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .submit-btn {
                grid-column: 1;
            }

            .container {
                padding: 40px 20px;
            }

            section {
                padding: 50px 0 100px;
            }

            .modal-nav {
                padding: 12px;
                width: 40px;
                height: 40px;
                font-size: 24px;
            }

            #prevBtn {
                left: 10px;
            }

            #nextBtn {
                right: 10px;
            }

            .close-modal {
                right: 20px;
                font-size: 30px;
            }
        }

        /* --- Pikaday Calendar Styling --- */
        .pika-single {
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: #D5E0D8 !important;        /* --- Ichanged callendar gackground to  #73737A !important; from var(--bg-slate):--- */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            max-width: 300px;
            margin: 0 auto;
            font-family: inherit;
        }

        .pika-title {
            color: var(--heading-color) !important;
            font-weight: bold;
            text-align: center;
        }

        .pika-label {
            color: var(--heading-color) !important;
        }

        .pika-next,
        .pika-prev {
            color: var(--primary-color) !important;
            font-weight: bold;
        }

        .pika-button {
            color: var(--text-color) !important;
            transition: all 0.2s ease;
            position: relative;
        }

        .pika-button:hover:not(.is-disabled):not(.is-selected) {
            background-color: var(--hover-bg) !important;
            color: #054017 !important; /* --- I changed from white to #054017 (dark green) --- */
        }

        .is-today .pika-button {
            border: 1px solid var(--primary-color);
            color: var(--primary-color) !important;
            font-weight: bold;
        }

        .is-selected .pika-button {
            background: var(--primary-color) !important;
            color: var(--bg-deepest) !important;
            font-weight: bold;
        }

        .is-disabled .pika-button {
            color: var(--disabled-color) !important;
            opacity: 0.6;
        }
        
        /* --- Unavailable Date Styling --- */
        .pika-day.unavailable-date {
            position: relative;
            background-color: rgba(231, 76, 60, 0.1) !important;
            border-radius: 4px;
        }

        .pika-day.unavailable-date::after {
            content: "✕";
            font-weight: bold;
            color: #e74c3c;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.1em;
            pointer-events: none;
            z-index: 2;
        }

        .pika-day.is-disabled.unavailable-date {
            cursor: not-allowed;
        }

        /* --- Tooltip Styling --- */
        .tooltip {
            position: absolute;
            background-color: #333;
            color: white;
            padding: 6px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            white-space: nowrap;
            z-index: 3000;
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
        }

        .tooltip.show {
            opacity: 1;
        }
    </style>

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/pikaday/css/pikaday.css">
    <script src="https://cdn.jsdelivr.net/npm/moment/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pikaday/pikaday.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <a href="#home" class="nav-logo">Leonella's Vacation Home</a>
        <ul class="nav-links" id="navLinks">
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#amenities">Amenities</a></li>
            <li><a href="#book-now">Book Now</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
        <button class="menu-toggle" id="menuToggle">☰</button>
    </nav>

    <main>
        <section id="home">
            <div class="container">
                <h2>Welcome to Leonella's Vacation Home</h2>
                <p>Your perfect escape in a beautiful, quiet residential area. Enjoy comfort, privacy, and convenience just minutes from essential amenities and major routes.</p>
                <a href="#about" class="btn">Learn More</a>
                <a href="#book-now" class="btn" style="margin-left: 15px;">Check Availability</a>
            </div>
        </section>

        <section id="about">
            <div class="container">
                <h2>About The Property</h2>
                <p>Leonella's Vacation Home is situated on Campo Street Extension, San Juan, Trinidad. The quiet neighborhood ensures restful nights while still being minutes away from the lively Croisee, where you’ll find groceries, bakeries, stores, banks, and public transport. Major routes to Piarco International Airport, Downtown Port of Spain, and Maracas Beach are all within easy reach.</p>
                <p>This charming 2-bedroom residential home is ideal for couples, families, or small groups seeking a peaceful retreat with modern comforts and easy city access.</p>
                <div style="text-align: center; margin-top: 30px;">
                    <a href="#house-rules" class="btn" style="margin: 0 10px;">View Our Home Rules</a>
                    <a href="#gallery" class="btn" style="margin: 0 10px;">View Gallery</a>
                    <a href="#book-now" class="btn" style="margin: 0 10px;">Check Availability</a>
                </div>
            </div>
        </section>

        <section id="amenities">
            <div class="container">
                <h2>Our Amenities</h2>
                <ul class="amenities-grid">
                    <li>✔️ Comfortable bedrooms (rent 1 or 2)</li>
                    <li>✔️ Fresh linens & towels</li>
                    <li>✔️ Fully Equipped Kitchen</li>
                    <li>✔️ High-Speed Wi-Fi</li>
                    <li>✔️ Smart TV with Streaming</li>
                    <li>✔️ Secure gated premises</li>
                    <li>✔️ Private Backyard</li>
                    <li>✔️ Free On-site Parking</li>
                    <li>✔️ Washer & Dryer</li>
                    <li>✔️ Air Conditioning & Hot Water</li>
                </ul>
            </div>
        </section>

        <section id="house-rules">
            <div class="container">
                <h2>House Rules</h2>
                <ul class="rules-list">
                    <li>Smoking is NOT ALLOWED inside. Guests may smoke outside.</li>
                    <li>Present your ID, Passport or Temporary Residence Card upon check-in.</li>
                    <li>Inform us the night before departure of your intended check-out time.</li>
                    <li>All waste must be placed in the provided garbage cans outside. Collection is daily early morning, Monday-Friday.</li>
                    <li>Switch off all electrical appliances before leaving the house.</li>
                    <li>Conserve water; supply automatically switches to the water tank during shortages.</li>
                    <li>Guests are responsible for any loss or damage caused by themselves or their companions.</li>
                    <li>Park vehicles only in the designated area.</li>
                    <li>Maximum occupancy is 4 persons. Extra charge of $25 USD per additional person.</li>
                    <li>Pets are not allowed inside or on the grounds.</li>
                    <li>Keep noise to a minimum to respect our neighbors.</li>
                    <li>Maintain a clean and sanitary environment.</li>
                    <li>Secure the gates when entering or leaving the premises.</li>
                </ul>
                <p style="text-align: center; margin-top: 30px;">These rules are written to ensure that your time here is safe and trouble free. We wish you a pleasant and enjoyable vacation! You are always welcome!</p>
            </div>
        </section>

        <section id="gallery">
            <div class="container">
                <h2>Gallery</h2>
                <p>Take a visual tour of our cozy and thoughtfully decorated vacation home.</p>
                <div class="gallery-grid">
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/293.jpg">
                        <img src="https://drutech6.github.io/Images/293.jpg" alt="Kitchen">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/723.jpg">
                        <img src="https://drutech6.github.io/Images/723.jpg" alt="Bedroom">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/293.jpg">
                        <img src="https://drutech6.github.io/Images/293.jpg" alt="Backyard">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/723.jpg">
                        <img src="https://drutech6.github.io/Images/723.jpg" alt="Exterior">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/293.jpg">
                        <img src="https://drutech6.github.io/Images/293.jpg" alt="Bathroom">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/723.jpg">
                        <img src="https://drutech6.github.io/Images/723.jpg" alt="Living Room">
                    </div>
                </div>
            </div>
        </section>
        <section id="book-now">
            <div class="container">
                <h2>Book Your Stay</h2>
                <form id="bookingForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="checkIn">Check-In Date</label>
                            <input type="text" id="checkIn" required readonly placeholder="Select a date...">
                        </div>
                        <div class="form-group">
                            <label for="checkOut">Check-Out Date</label>
                            <input type="text" id="checkOut" required readonly placeholder="Select a date...">
                        </div>
                        <button type="button" class="submit-btn" id="requestBookBtn">Book Now</button>
                    </div>
                </form>
                <p id="form-submitted-msg" style="text-align:center; display:none; margin-top: 20px; color: #4CAF50; font-weight: bold;">
                    Thank you! Your booking request has been submitted. We'll be in touch soon.
                </p>
            </div>
        </section>

        <section id="contact">
            <div class="container">
                <h2>Contact Us</h2>
                <p>Have questions? Feel free to reach out anytime.<br>Email: ghxaar93@yahoo.com | Phone: 347-377-7785 | 347-441-6399 | Cell: 868-361-3642</p>
                <p style="text-align: center; margin-top: 20px;"><a href="#book-now" class="btn">Check Availability</a></p>
            </div>
        </section>
    </main>

    <div id="imageModal" class="modal">
        <button class="close-modal" id="closeModal">&times;</button>
        <button id="prevBtn" class="modal-nav">&#10094;</button>
        <div class="modal-content">
            <img id="modalImage" src="" alt="Full-size gallery image">
        </div>
        <button id="nextBtn" class="modal-nav">&#10095;</button>
    </div>

    <div id="tooltip" class="tooltip">Booked</div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- Mobile Menu Toggle ---
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.getElementById('navLinks');
        menuToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });

        // --- Calendar & Booking Logic ---
        const tooltip = document.getElementById('tooltip');
        let checkInPicker, checkOutPicker;

        // Helper function to format date as 'YYYY-MM-DD'
        function formatDate(date) {
            return moment(date).format('YYYY-MM-DD');
        }

        // Tooltip setup function
        function setupTooltip(element, text) {
            element.addEventListener('mouseenter', () => {
                const rect = element.getBoundingClientRect();
                tooltip.textContent = text;
                tooltip.style.left = `${rect.left + rect.width / 2 - tooltip.offsetWidth / 2}px`;
                tooltip.style.top = `${rect.top - 35 + window.scrollY}px`; // Adjust for scroll
                tooltip.classList.add('show');
            });
            element.addEventListener('mouseleave', () => {
                tooltip.classList.remove('show');
            });
        }

        // Function to initialize both calendars
        function initializeCalendars(unavailableDates = []) {
            // Converts string dates from JSON to Date objects
            const unavailableDateObjects = unavailableDates.map(d => moment(d, 'YYYY-MM-DD').toDate());

            // --- Check-In Calendar ---
            checkInPicker = new Pikaday({
                field: document.getElementById('checkIn'),
                format: 'YYYY-MM-DD',
                minDate: new Date(),
                disableDayFn: function(date) {
                    // Disable dates that are in the unavailable list
                    return unavailableDates.includes(formatDate(date));
                },
                onSelect: function() {
                    const minCheckoutDate = new Date(this.getDate());
                    minCheckoutDate.setDate(minCheckoutDate.getDate() + 1);
                    checkOutPicker.setMinDate(minCheckoutDate);
                    // If checkout is before new checkin, clear it
                    if (checkOutPicker.getDate() && checkOutPicker.getDate() <= this.getDate()) {
                        checkOutPicker.setDate(null);
                    }
                },
                onDraw: function() {
                    // Apply custom class and tooltip after calendar is drawn
                    setTimeout(() => {
                        const days = this.el.querySelectorAll('.pika-day');
                        days.forEach(day => {
                            const year = day.getAttribute('data-pika-year');
                            const month = day.getAttribute('data-pika-month');
                            const dayNum = day.getAttribute('data-pika-day');
                            const currentDateStr = formatDate(new Date(year, month, dayNum));
                            
                            if (unavailableDates.includes(currentDateStr)) {
                                day.classList.add('unavailable-date');
                                setupTooltip(day, 'Booked');
                            }
                        });
                    }, 0);
                }
            });

            // --- Check-Out Calendar ---
            checkOutPicker = new Pikaday({
                field: document.getElementById('checkOut'),
                format: 'YYYY-MM-DD',
                minDate: new Date(),
                 disableDayFn: function(date) {
                    // Disable dates that are in the unavailable list
                    return unavailableDates.includes(formatDate(date));
                },
                onDraw: function() {
                     // Apply custom class and tooltip after calendar is drawn
                    setTimeout(() => {
                        const days = this.el.querySelectorAll('.pika-day');
                        days.forEach(day => {
                            const year = day.getAttribute('data-pika-year');
                            const month = day.getAttribute('data-pika-month');
                            const dayNum = day.getAttribute('data-pika-day');
                            const currentDateStr = formatDate(new Date(year, month, dayNum));

                            if (unavailableDates.includes(currentDateStr)) {
                                day.classList.add('unavailable-date');
                                setupTooltip(day, 'Booked');
                            }
                        });
                    }, 0);
                }
            });
        }

        // --- Fetch availability data THEN initialize calendars ---
        fetch('availability.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('JSON file not found or network error.');
                }
                return response.json();
            })
            .then(data => {
                initializeCalendars(data.unavailableDates || []);
            })
            .catch(err => {
                console.error('Failed to load availability.json. Using fallback dates.', err);
                const fallbackDates = ['2025-08-23', '2025-08-24', '2025-08-25', '2025-08-26', '2025-08-27', '2025-08-28', '2025-08-29', '2025-08-30', '2025-08-31', '2025-09-01', '2025-09-02', '2025-09-03', '2025-09-04', '2025-09-05', '2025-09-06', '2025-09-07', '2025-09-08', '2025-09-09', '2025-09-10', '2025-09-11', '2025-09-12', '2025-09-13', '2025-09-14', '2025-09-15', '2025-09-16', '2025-09-17', '2025-09-18', '2025-09-19', '2025-09-20', '2025-09-21', '2025-09-22', '2025-09-23', '2025-09-24', '2025-09-25', '2025-09-26', '2025-09-27', '2025-09-28', '2025-09-29', '2025-09-30', '2025-10-01', '2025-10-02', '2025-10-03', '2025-10-04', '2025-10-05', '2025-10-06', '2025-10-07', '2025-10-08', '2025-10-09', '2025-10-10', '2025-10-11', '2025-10-12', '2025-10-13', '2025-10-14', '2025-10-15', '2025-10-16', '2025-10-17', '2025-10-18', '2025-10-19', '2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19', '2025-11-20', '2025-11-21', '2025-11-22', '2025-11-23', '2025-11-24', '2025-11-25', '2025-11-26', '2025-11-27', '2025-11-28', '2025-11-29', '2025-11-30', '2025-12-01', '2025-12-02', '2025-12-03', '2025-12-04', '2025-12-05'];
                initializeCalendars(fallbackDates);
            });


        // --- Prevent Booking on Unavailable Dates ---
        document.getElementById('requestBookBtn').addEventListener('click', function () {
            const checkin = document.getElementById('checkIn').value;
            const checkout = document.getElementById('checkOut').value;

            if (!checkin || !checkout) {
                alert('Please select both check-in and check-out dates.');
                return;
            }

            if (new Date(checkout) <= new Date(checkin)) {
                alert('Check-out date must be after check-in date.');
                return;
            }

            // This check is redundant if disableDayFn works, but good as a fallback
            if (checkInPicker.getMoment().isDisable || checkOutPicker.getMoment().isDisable) {
                 alert('Sorry, one of the selected dates is not available.');
                 return;
            }

            const GOOGLE_FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSf6nNdYKHmswjkq1ZhmzYnetAwMsqPYi0Esp76Jv_Rant8J0A/viewform?usp=pp_url";
            const url = `${GOOGLE_FORM_URL}&entry.120129823=${encodeURIComponent(checkin)}&entry.78700285=${encodeURIComponent(checkout)}`;
            window.open(url, '_blank');
        });

        // --- Image Gallery Modal Functionality ---
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const closeModal = document.getElementById('closeModal');
        const galleryItems = document.querySelectorAll('.gallery-item');

        let currentIndex = 0;
        const imageArray = Array.from(galleryItems).map(item => ({
            src: item.getAttribute('data-img'),
            alt: item.querySelector('img').alt
        }));

        galleryItems.forEach((item, index) => {
            item.addEventListener('click', () => {
                currentIndex = index;
                modalImg.src = imageArray[currentIndex].src;
                modalImg.alt = imageArray[currentIndex].alt;
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
        });

        const hideModal = () => {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        };

        closeModal.addEventListener('click', hideModal);

        prevBtn.addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + imageArray.length) % imageArray.length;
            modalImg.src = imageArray[currentIndex].src;
            modalImg.alt = imageArray[currentIndex].alt;
        });

        nextBtn.addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % imageArray.length;
            modalImg.src = imageArray[currentIndex].src;
            modalImg.alt = imageArray[currentIndex].alt;
        });

        document.addEventListener('keydown', (e) => {
            if (modal.style.display === 'flex') {
                if (e.key === 'Escape') hideModal();
                else if (e.key === 'ArrowLeft') prevBtn.click();
                else if (e.key === 'ArrowRight') nextBtn.click();
            }
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) hideModal();
        });
    });
    </script>
</body>
</html>
